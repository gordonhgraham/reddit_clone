<!DOCTYPE html>
<html ng-App="redditClone">
    <head>
        <meta charset="utf-8">
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
        <script src="https://use.fontawesome.com/7f5c5a8c99.js"></script>
        <title>Reddit Clone</title>
    </head>
    <body ng-controller="PostsController">
        <div class="navbar-fixed">
            <nav>
                <div class="nav-wrapper black">
                    <a href="#" class="brand-logo">Reddit Clone</a>
                    <ul id="nav-mobile" class="right hide-on-med-and-down">
                        <li>
                            <a href="">Submit Post</a>
                        </li>
                        <li>
                            <form>
                                <div class="input-field">
                                    <input id="search" type="search" required>
                                    <label for="search">
                                        <i class="material-icons">search</i>
                                    </label>
                                    <i class="material-icons">close</i>
                                </div>
                            </form>
                        </li>
                        <li>
                            <a href="#">Order By</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="container main">
            <div class="newPost">
                <form name="newPostForm" ng-submit="addPost()">
                    <label for="title">Title:</label>
                    <input type="text" name="title" ng-model="title" required>
                    <label for="author">Author:</label>
                    <input type="text" name="author" ng-model="author" required>
                    <label for="img">Image:</label>
                    <input type="text" name="img" ng-model="img" required>
                    <label for="description">Description:</label>
                    <textarea name="description" ng-model="description" required></textarea>
                    <input type="submit" value="Submit">
                </form>
            </div>
            <div>
                <ul>
                    <li ng-repeat="post in posts | orderBy: 'votes' : true ">
                        <div class="col s12 m7">
                            <div class="card horizontal">
                                <div class="card-image"><img ng-src="{{post.image}}"></div>
                                <div class="card-stacked">
                                    <div class="card-content">
                                        <p style="display: inline-block">
                                            <strong>{{post.title}}
                                                |</strong>
                                        </p>
                                        <a ng-click="post.votes = post.votes+1">
                                            <i class="fa fa-arrow-up fa-1x" aria-hidden="true"></i>
                                        </a>
                                        <a ng-click="post.votes = post.votes-1">
                                            <i class="fa fa-arrow-down fa-1x" aria-hidden="true"></i>
                                        </a>
                                        <p style="display: inline-block">
                                            {{post.votes}}
                                        </p>
                                        <p>
                                            {{post.author}}
                                        </p>
                                        <hr>
                                        <p>{{post.description}}</p>
                                    </div>
                                    <div class="card-action">
                                        <p style="display: inline-block">{{ post.date | date }}</p>
                                        <a ng-click="isCommentsOpen = !isCommentsOpen">Comments</a>
                                        <a ng-click="isAddCommentOpen = !isAddCommentOpen">Add Comment</a>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="comments" ng-show="isCommentsOpen">
                            <div class="comment" ng-repeat="comment in post.comments">
                                Author:
                                {{comment.author}}
                                Text:
                                {{comment.text}}
                            </div>
                        </div>
                        <div ng-show="isAddCommentOpen">
                            <form name="" ng-submit="addComment()">
                                <label for="author">Author:</label>
                                <input type="text" name="author" ng-model="addCommentForm.author" required>
                                <label for="text">Text:</label>
                                <input type="text" name="text" ng-model="addCommentForm.text" required>
                                <input type="submit" name="addComment" value="Add Comment">
                            </form>
                        </div>
                    </li>
                </ul>
            </div>

        </div>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
        <script src="https://code.angularjs.org/1.5.8/angular.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
        <script src="app.js"></script>
    </body>
</html>
